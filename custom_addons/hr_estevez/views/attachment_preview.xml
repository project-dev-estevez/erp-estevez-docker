<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data>
        <record id="attachment_preview" model="ir.ui.view">
            <field name="name">attachment.preview</field>
            <field name="model">ir.attachment</field>
            <field name="arch" type="xml">
                <form string="Vista previa">
                    <sheet>
                        <group>
                            <field name="name" invisible="1"/>

                            <!-- Vista previa SOLO para imágenes -->
                            <field name="datas"
                                   widget="image"
                                   options="{'zoom': true}"
                                   style="max-width: 100vw; max-height: 100vh; width: auto; height: auto;
                                    object-fit: contain; border: 1px solid #dee2e6; border-radius: 8px;
                                    padding: 10px; background: white;"
                                   invisible="not mimetype or not ('image/' in mimetype)"/>
                                   
                            <!-- Campo binario normal para NO imágenes -->
                            <field name="datas"
                                   invisible="mimetype"/>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>
    </data>
</odoo>
