<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="password_change_required_template" name="Cambio de Contraseña Obligatorio">
        <t t-call="web.login_layout">
            <t t-set="login_card_classes" t-value="'card shadow-lg'"/>
            <t t-set="hide_database_manager" t-value="1"/>
            
            <!-- Estilos para responsive y ajuste de tamaño -->
            <style>
                .o_database_list {
                    max-width: 550px !important;
                    width: 90% !important;
                    margin-top: 2rem !important;
                }
                @media (max-width: 576px) {
                    .o_database_list {
                        max-width: 95% !important;
                        margin-top: 1rem !important;
                    }
                }
                /* Ocultar manage databases */
                .o_database_list + div,
                a[href="/web/database/manager"] {
                    display: none !important;
                }
            </style>
            
            <div class="card-body p-3">
                    <!-- Título compacto -->
                    <div class="text-center mb-3">
                        <h4 class="text-primary mb-0">
                            <i class="fa fa-lock me-2"></i>
                            Cambio de Contraseña
                        </h4>
                    </div>
                    
                    <!-- Alerta de advertencia compacta -->
                    <div class="alert alert-warning py-2 mb-3" role="alert">
                        <i class="fa fa-exclamation-triangle me-2"></i>
                        <small><strong>¡Atención!</strong> Debe cambiar su contraseña temporal.</small>
                    </div>
                    
                    <!-- Mostrar errores si existen -->
                    <t t-if="error">
                        <div class="alert alert-danger alert-dismissible fade show" role="alert">
                            <i class="fa fa-exclamation-circle me-2"></i>
                            <t t-esc="error"/>
                            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                        </div>
                    </t>
                    
                    <!-- Formulario compacto -->
                    <form method="POST" action="/web/change_password_submit" class="oe_login_form">
                        <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                        
                        <div class="mb-2">
                            <label for="new_password" class="form-label small mb-1">
                                <i class="fa fa-key me-1"></i>
                                Nueva Contraseña
                            </label>
                            <input type="password" 
                                   class="form-control form-control-sm" 
                                   id="new_password" 
                                   name="new_password"
                                   placeholder="Mínimo 8 caracteres"
                                   required="required"
                                   minlength="8"
                                   autofocus="autofocus"/>
                        </div>
                        
                        <div class="mb-3">
                            <label for="confirm_password" class="form-label small mb-1">
                                <i class="fa fa-check-circle me-1"></i>
                                Confirmar Contraseña
                            </label>
                            <input type="password" 
                                   class="form-control form-control-sm" 
                                   id="confirm_password" 
                                   name="confirm_password"
                                   placeholder="Repita la contraseña"
                                   required="required"
                                   minlength="8"/>
                        </div>
                        
                        <div class="d-grid">
                            <button type="submit" class="btn btn-primary">
                                <i class="fa fa-save me-2"></i>
                                Cambiar Contraseña
                            </button>
                        </div>
                    </form>
                    
                    <div class="text-center mt-3">
                        <small class="text-muted">
                            <i class="fa fa-shield-alt me-1"></i>
                            Sus datos están protegidos
                        </small>
                    </div>
                </div>
        </t>
    </template>
</odoo>