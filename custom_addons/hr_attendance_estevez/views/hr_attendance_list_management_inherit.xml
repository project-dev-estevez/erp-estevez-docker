<odoo>
    <record id="view_attendance_tree_inherit_department" model="ir.ui.view">
        <field name="name">hr.attendance.list.inherit.department</field>
        <field name="model">hr.attendance</field>
        <field name="inherit_id" ref="hr_attendance.view_attendance_tree"/>
        <field name="arch" type="xml">

            <!-- Ocultar botÃ³n Create -->
            <xpath expr="//list" position="attributes">
                <attribute name="create">false</attribute>
            </xpath>

            <xpath expr="//field[@name='employee_id']" position="after">
                <field name="department_id" string="Departamento"/>
                <field name="job_id" string="Puesto de trabajo" readonly="1"/>
            </xpath>
            <xpath expr="//field[@name='check_in']" position="after">
                <button name="action_show_checkin_photo"
                        type="object"
                        string=""
                        icon="fa-image"
                        class="btn btn-outline-secondary btn-sm"
                        invisible="check_in_photo == False"/>
                <button name="action_show_checkin_location"
                        type="object"
                        string=""
                        icon="fa-map-marker"
                        class="btn btn-outline-secondary btn-sm"
                        invisible="check_in_latitude == False or check_in_longitude == False"/>
            </xpath>

            <xpath expr="//field[@name='check_out']" position="replace">
                <field name="is_auto_closed" column_invisible="1"/>
                <field name="check_out_display" 
                       string="Salida"
                       decoration-warning="is_auto_closed == True and not check_out"/>
            </xpath>

            <xpath expr="//field[@name='check_out_display']" position="after">
                <button name="action_show_checkout_photo"
                        type="object"
                        string=""
                        icon="fa-image"
                        class="btn btn-outline-secondary btn-sm"
                        invisible="check_out_photo == False"/>
                <button name="action_show_checkout_location"
                        type="object"
                        string=""
                        icon="fa-map-marker"
                        class="btn btn-outline-secondary btn-sm"
                        invisible="check_out_latitude == False or check_out_longitude == False"/>
            </xpath>


            <xpath expr="//field[@name='overtime_hours']" position="attributes">
                <attribute name="optional">hidden</attribute>
            </xpath>
            <xpath expr="//field[@name='validated_overtime_hours']" position="attributes">
                <attribute name="optional">hidden</attribute>
            </xpath>
            <xpath expr="//field[@name='worked_hours']" position="attributes">
                <attribute name="optional">hidden</attribute>
            </xpath>
            <xpath expr="//field[@name='worked_hours']" position="after">
                <field name="status" widget="badge"
                    decoration-info="status == 'pending'"
                    decoration-warning="status == 'retarded'"
                    decoration-success="status == 'approved'"
                    decoration-danger="status == 'rejected'"/>

                <button name="action_accept_checkin"
                        type="object"
                        string=""
                        icon="fa-check"
                        class="btn btn-success btn-sm"
                        invisible="status == 'approved'"/>
                <button name="action_reject_checkin"
                        type="object"
                        string=""
                        icon="fa-times"
                        class="btn btn-danger btn-sm"
                        invisible="status == 'rejected'"/>
                <button name="action_show_log"
                        type="object"
                        string=""
                        icon="fa-comment"
                        class="btn btn-secondary btn-sm"/>
            </xpath>
        </field>
    </record>

    <record id="hr_attendance_view_filter" model="ir.ui.view">
        <field name="name">hr.attendance.search.inherit</field>
        <field name="model">hr.attendance</field>
        <field name="inherit_id" ref="hr_attendance.hr_attendance_view_filter"/>
        <field name="arch" type="xml">

            <!-- Filtro por rango de fechas -->
            <xpath expr="//filter[@name='check_in_filter']" position="replace">
                <filter string="Hoy" name="today" domain="[('check_in', '&gt;=', (context_today()).strftime('%%Y-%%m-%%d 00:00:00')), ('check_in', '&lt;=', (context_today()).strftime('%%Y-%%m-%%d 23:59:59'))]" help="Asistencias de hoy"/>
                <filter string="Ayer" name="yesterday" domain="[('check_in', '&gt;=', (context_today() - datetime.timedelta(days=1)).strftime('%%Y-%%m-%%d 00:00:00')), ('check_in', '&lt;=', (context_today() - datetime.timedelta(days=1)).strftime('%%Y-%%m-%%d 23:59:59'))]" help="Asistencias de ayer"/>
                <filter string="Antier" name="before_yesterday" domain="[('check_in', '&gt;=', (context_today() - datetime.timedelta(days=2)).strftime('%%Y-%%m-%%d 00:00:00')), ('check_in', '&lt;=', (context_today() - datetime.timedelta(days=2)).strftime('%%Y-%%m-%%d 23:59:59'))]" help="Asistencias de antier"/>
                <filter string="Fecha" name="check_in_filter" date="check_in"/>
            </xpath>

            <!-- Filtros por estado -->
            <xpath expr="//filter[@name='myattendances']" position="before">
                <field name="status"/>
                <filter name="filter_status_pending"
                        string="Pendiente"
                        domain="[('status', '=', 'pending')]"/>
                <filter name="filter_status_retarded"
                        string="Retardo"
                        domain="[('status', '=', 'retarded')]"/>
                <filter name="filter_status_approved"
                        string="Aprobado"
                        domain="[('status', '=', 'approved')]"/>
                <filter name="filter_status_rejected"
                        string="Rechazado"
                        domain="[('status', '=', 'rejected')]"/>
            </xpath>
        </field>
    </record>
</odoo>