<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>        
        <record id="view_attachment_image_form" model="ir.ui.view">
            <field name="name">ir.attachment.image.form</field>
            <field name="model">ir.attachment</field>
            <field name="arch" type="xml">
                <form string="Vista Previa">
                    <sheet>
                        <group>
                            <!-- Vista previa de imagen -->
                            <div invisible="not mimetype or not ('image/' in mimetype)">
                                <field name="datas" widget="image" options="{'zoom': true}"
                                    style="max-width: 100vw; max-height: 100vh; width: auto; height: auto;
                                    object-fit: contain; border: 1px solid #dee2e6; border-radius: 8px;
                                    padding: 10px; background: white;"/>
                            </div>
                            <!-- Vista previa de PDF -->
                            <div invisible="not mimetype or mimetype != 'application/pdf'">
                                <div style="border: 1px solid #dee2e6; border-radius: 8px;
                                    background: #f8f9fa; padding: 10px; margin: 20px 0; height: auto;">
                                    <field name="datas" widget="pdf_viewer"
                                    style="max-width: 100vw; max-height: 100vh; width: auto; height: auto;
                                    object-fit: contain; border: 1px solid #dee2e6; border-radius: 8px;
                                    padding: 10px; background: white;"/>
                                </div>
                            </div>
                            <!-- Otros tipos de archivo -->
                            <div invisible="mimetype and (('image/' in mimetype) or mimetype == 'application/pdf')">
                                <div class="alert alert-info text-center" role="alert" style="margin: 20px 0;">
                                    <i class="fa fa-file-o fa-3x mb-3" title="Archivo no soportado"/>
                                    <p><strong>Tipo de archivo no soportado para vista previa</strong></p>
                                    <field name="mimetype" readonly="1" class="d-inline"/>
                                </div>
                            </div>
                            <!-- Información del documento -->
                            <!--group string="Información del Documento" class="mt-4">
                                <field name="name" readonly="1" string="Nombre"/>
                                <field name="mimetype" readonly="1" string="Tipo MIME"/>
                                <field name="file_size" readonly="1" string="Tamaño"/>
                            </group-->
                        </group>
                    </sheet>
                </form>
            </field>
        </record>
    </data>
</odoo>
